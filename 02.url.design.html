<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Webscripting2 &mdash; Serverside Webscripting &mdash; 02.url.design</title>

		<meta name="description" content="Webscripting2 &mdash; Serverside Webscripting &mdash; 02.url.design">
		<meta name="author" content="Bram(us) Van Damme - ikdoeict.be">

		<link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic' rel='stylesheet' type='text/css'>

		<link rel="stylesheet" href="css/reset.css">
		<link rel="stylesheet" href="css/main.css" media="screen">
		<link rel="stylesheet" href="css/print.css" media="print">

		<link rel="stylesheet" href="lib/zenburn.css">
	</head>

	<body>

		<div id="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">


				<!-- Title -->
				<section>
					<section>
						<h3 class="inverted">Serverside Webscripting <small>[JLW323]</small></h3>
						<h1>02.url.design</h1>

						<footer>
							<em><a href="http://www.ikdoeict.be/">ikdoeict.be</a> &mdash; <a href="mailto:bramus.vandamme@kahosl.be">bramus.vandamme@kahosl.be</a></em>
						</footer>
						<script>
							// Delicously hacky. Look away.
							if( navigator.userAgent.match( /(iPhone|iPad|iPod|Android)/i ) )
							document.write( '<p style="color: rgba(0,0,0,0.3); text-shadow: none;">('+'Tap to navigate'+')</p>' );
						</script>
					</section>
				</section>


				<!-- URL Design -->
				<section>
					<section>
						<h2>URL Design</h2>

						<p><img src="assets/02/futurama_bendersroom.jpg" alt="" title="" width="447" height="334"></p>
						<q>Not enough room? My place is 2 cubic meters and we only take up 1.5 cubic meters. We've got room for a whole nother 2/3rds of a person.</q>
					</section>

					<section>
						<h2>URLs in the olden days</h2>

						<ul>
							<li class="fragment">
								In the beginning
								<ul>
									<li><code>http://example.org/index.php?action=zomg&amp;page=lol</code></li>
								</ul>
							</li>
							<li class="fragment" style="margin-top: 1em">
								Then SEO and &ldquo;<em>nice urls</em>&rdquo; came along
								<ul>
									<li class="fragment"><code>http://example.org/zomg/lol</code></li>
									<li class="fragment"><code>http://example.org/videos/latest/hamburgers</code></li>
									<li class="fragment"><code>http://example.org/search/lolcats/pictures/yes/1/200</code></li>
								</ul>
							</li>
						</ul>
						<p class="fragment" style="position: absolute; top: 15%; left: 10%; right: 10%; bottom: 10%; transform: rotate(-8deg);"><img src="assets/02/picard-facepalm.jpg" style="width: 500px;" /></p>
						<p class="fragment" style="position: absolute; top: 15%; left: 5%; right: 10%; bottom: 10%; transform: rotate(-5deg);"><img src="assets/02/picard-double-facepalm.jpg" style="width: 500px;" /></p>
					</section>

					<section>
						<h2>Richardson Maturity Model</h2>
						<ul>
							<li class="fragment">Model describing the principal elements of a RESTful API
								<ul>
									<li class="fragment">Level 0: Use HTTP as transport system</li>
									<li class="fragment">Level 1: Identify and organize resources in a hierarchy</li>
									<li class="fragment">Level 2: Use HTTP verbs for operations</li>
									<li class="fragment">Level 3: <acronym title="Hypertext As The Engine Of Application State">HATEOAS</acronym></li>
								</ul>
							</li>
							<li class="fragment" style="margin-top: 1em">Level 1 is what we'll be focussing on
							</li>
						</ul>
						<footer class="fragment"><em>Note: In <a href="http://bramus.github.com/ria-course-materials/">Web &amp; Mobile Development</a> we'll further implement this model</em></footer>
					</section>

					<section>
						<h2>Identification &amp; Hierarchy</h2>
						<ul>
							<li class="fragment">
								Basic naming conventions
								<ul>
									<li class="fragment">Verbs are bad, nouns are good</li>
									<li class="fragment">Use plurals</li>
									<li class="fragment">Respect the Hierarchy</li>
								</ul>
							</li>
							<li class="fragment" style="margin-top: 1em">
								Examples
								<ul>
									<li class="fragment"><del><code>/product</code></del> &rarr; <ins><code>/products</code></ins></li>
									<li class="fragment"><del><code>/product/1234</code></del> &rarr; <ins><code>/products/1234</code></ins></li>
									<li class="fragment"><del><code>/photos/product/1234</code></del> &rarr; <ins><code>/products/1234/photos</code></ins></li>
									<li class="fragment"><del><code>/photos/product/1234/5678</code></del> &rarr; <ins><code>/products/1234/photos/5678</code></ins></li>
								</ul>
							</li>
						</ul>
						<footer class="fragment">This doesn't apply for <em>&ldquo;normal pages&rdquo; of your site</em></footer>
					</section>

					<section>
						<h2>Identification &amp; Hierarchy bis</h2>
						<ul>
							<li class="fragment">
								Use concrete naming, yet don't be too specific
								<ul>
									<li class="fragment"><del><code>/things</code></del></li>
									<li class="fragment"><del><code>/animals</code></del></li>
									<li class="fragment"><code class="ok">/dogs</code></li>
									<li class="fragment"><del><code>/beagles</code></del></li>
								</ul>
							</li>
						</ul>
					</section>

					<section>
						<h2>Example</h2>

						<ul>
							<li><code>/</code></li>
							<li><code>/movies</code></li>
							<li><code>/movies/<em>{id}</em></code></li>
							<li><code>/movies/<em>{id}</em>/photos</code></li>
							<li><code>/actors</code></li>
							<li><code>/actors/<em>{id}</em></code></li>
							<li><code>/actors/<em>{id}</em>/movies</code></li>
							<li><code>/about</code></li>
							<li><code>/contact</code></li>
						</ul>
					</section>
				</section>


				<!-- Supporting Nice URLs -->
				<section>
					<section>
						<h2>Supporting Nice URLs</h2>

						<p><img src="assets/02/futurama-buttfailure.png" alt="" title="" width="447" /></p>
						<q>I installed shock absorbing bumpers on your ass to minimize the chance of catastrofic butt failure.</q>
					</section>

					<section>
						<h2>Supporting nice URLs</h2>
						<ol>
							<li class="fragment">
								Route all requests to <code>index.php</code>
							</li>
							<li class="fragment" style="margin-top: 1em;">
								Build <code>index.php</code> in such a way so that it loads the requested content based upon the URL
							</li>
						</ol>
					</section>

					<section>
						<h2>1. Howto: Apache</h2>
						<ul>
							<li class="fragment">
								Possible using the <code>mod_rewrite</code> Apache Module
								<ul>
									<li>Wampserver: not enabled by default (<a href="assets/02/wamp_url_rewrite.png">instructions</a>)</li>
									<li>MAMP Pro: enabled by default</li>
								</ul>
							</li>
							<li class="fragment">
								Put a file named <code>.htaccess</code> in your root to redirect requests to non-existing files to <code>index.php</code>
								<pre class="bigger"><code>&lt;IfModule mod_rewrite.c&gt;
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
&lt;/IfModule&gt;</code></pre>
							</li>
						</ul>
					</section>

					<section>
						<h2>1. Howto: IIS</h2>
						<ul>
							<li class="fragment">
								Possible using the <a href="http://www.iis.net/downloads/microsoft/url-rewrite">IIS Rewrite Module</a>
							</li>
							<li class="fragment">
								Put a file named <code>web.config</code> in your root to redirect requests to non-existing files to <code>index.php</code>
								<pre class="bigger"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;configuration&gt;
	&lt;system.webServer&gt;
		&lt;rewrite&gt;
			&lt;rules&gt;
				&lt;rule name=&quot;Main Rule&quot; stopProcessing=&quot;true&quot;&gt;
					&lt;match url=&quot;.*&quot; /&gt;
					&lt;conditions logicalGrouping=&quot;MatchAll&quot;&gt;
						&lt;add input=&quot;{REQUEST_FILENAME}&quot; matchType=&quot;IsFile&quot; negate=&quot;true&quot; /&gt;
						&lt;add input=&quot;{REQUEST_FILENAME}&quot; matchType=&quot;IsDirectory&quot; negate=&quot;true&quot; /&gt;
					&lt;/conditions&gt;
					&lt;action type=&quot;Rewrite&quot; url=&quot;index.php&quot; /&gt;
				&lt;/rule&gt;
			&lt;/rules&gt;
		&lt;/rewrite&gt;
	&lt;/system.webServer&gt;
&lt;/configuration&gt;</code></pre>
							</li>
						</ul>
					</section>

					<section>
						<h2>1. Howto: Built-in PHP 5.4 server</h2>
						<ul>
							<li class="fragment">
								<strong>All</strong> requests route to <code>index.php</code> by default
								<ul>
									<li class="fragment">You'll need to add some extra PHP code to <code>index.php</code> to force non-404 requests route to the correct file 
									</li>
								</ul>
								<div class="fragment"><pre class="bigger"><code>&lt;?php

$filename = __DIR__ . preg_replace('#(\?.*)$#', '', $_SERVER['REQUEST_URI']);
if (php_sapi_name() === 'cli-server' &amp;&amp; is_file($filename)) {
	return false;
}

// rest of your code here</code></pre></div>
							</li>
						</ul>
						<footer class="fragment"><em>Note: You can start a server by running <code>php -S localhost:8080</code> in your project www-root</em></footer>
					</section>


					<section>
						<h2>2. Howto</h2>

						<ul>
							<li class="fragment">
								Write something yourself.
								<ul>
									<li class="fragment">Use the value in <code>$_SERVER['REQUEST_URI']</code> to get started</li>
								</ul>
							</li>
							<li class="fragment" style="margin-top: 1em;">
								Install a <em>router</em> library that does this for you.
								<ul class="fragment">
									<li><a href="https://github.com/chriso/klein.php">Klein</a></li>
									<li><a href="https://github.com/radiosilence/Ham">HAM</a></li>
									<li><a href="https://github.com/bramus/router">bramus/router</a></li>
									<li>The router that ships with the framework you're using</li>
								</ul>
							</li>
						</ul>
					</section>


					<section>
						<h2>2. Example</h2>

						<pre class="bigger"><code class="language-php">&lt;?php

require __DIR__ . '/vendor/autoload.php';

$router = new \Bramus\Router\Router();

$router-&gt;get('/', function() {
	echo 'index';
});

$router-&gt;get('/hello', function() {
	echo 'hello';
});

$router-&gt;get('/hello/(\w+)', function($name) {
	echo 'hello ' . htmlentities($name);
});

$router->run();</code></pre>
					</section>

				</section>

				<!-- The END -->
				<section>
					<section>
						<h2>Questions?</h2>
						<footer>
							<em><a href="http://www.ikdoeict.be/">ikdoeict.be</a> &mdash; <a href="mailto:bramus.vandamme@kahosl.be">bramus.vandamme@kahosl.be</a></em>
						</footer>
					</section>
				</section>



				<!-- Sources -->
				<section id="sources">
					<section>
						<h2>Sources</h2>
						<ul>
							<li><a href="http://www.slideshare.net/Wombert/designing-http-interfaces-and-restful-web-services-dpc2012-20120608">http://www.slideshare.net/Wombert/designing-http-interfaces-and-restful-web-services-dpc2012-20120608</a></li>
							<li><a href="http://martinfowler.com/articles/richardsonMaturityModel.html">http://martinfowler.com/articles/richardsonMaturityModel.html</a></li>
							<li><a href="https://github.com/restcookbook/restcookbook/blob/master/_posts/2012-12-14-richardsonmaturitymodel.html">https://github.com/restcookbook/restcookbook/blob/master/_posts/2012-12-14-richardsonmaturitymodel.html</a></li>
						</ul>
					</section>
				</section>

			</div>

			<!-- The navigational controls UI -->
			<aside class="controls">
				<a class="left" href="#">&#x25C4;</a>
				<a class="right" href="#">&#x25BA;</a>
				<a class="up" href="#">&#x25B2;</a>
				<a class="down" href="#">&#x25BC;</a>
				<span id="revealIndex">/</span>
			</aside>

			<!-- Index Link -->
			<aside class="back">
				<a href="index.html">&larr; Back to index</a>
			</aside>

			<!-- ikdoeict.be Link -->
			<a href="http://www.ikdoeict.be/" title="ikdoeict.be" id="ikdoeict">ikdoeict.be</a>

			<!-- Displays presentation progress, max value changes via JS to reflect # of slides -->
			<div class="progress"><span></span></div>

		</div>

		<script src="js/reveal.js"></script>
		<script src="lib/highlight.js"></script>
		<script src="lib/prefixfree.js"></script>
		<script src="lib/css-snippets.js"></script>
		<script src="lib/css-edit.js"></script>
		<script src="lib/incrementable.js"></script>
		<script src="js/main.js"></script>

	</body>
</html>